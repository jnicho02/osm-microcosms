<% content_for :heading do %>
  <h1><%= "Microcosm" %></h1>
<% end %>

<h1>
  <%= link_to @microcosm.name, @microcosm %>
</h1>
<p>
  <%= auto_link @microcosm.description %>
</p>
<% unless @microcosm.facebook.nil? and @microcosm.twitter.nil? %>
  <p>
    <label>Share</label>
    <% unless @microcosm.facebook.nil? %>
      <a href="https://facebook.com/groups/<%=@microcosm.facebook%>">Facebook</a>
    <% end %>
    <% unless @microcosm.twitter.nil? %>
      <a href="https://twitter.com/<%=@microcosm.twitter%>">Twitter</a>
    <% end %>
  </p>
<% end %>

<% if current_user %>
  <%= form_with scope: :microcosm_member, url: microcosm_member_index_path do |form| %>
    <%= form.hidden_field(:microcosm_id, :value => @microcosm.id) %>
    <%= form.hidden_field(:user_id, :value => current_user.id) %>
    <%= form.submit :value => t('microcosm.join.action') %>
  <% end %>
<% else %>
  Log in to join this microcosm.
<% end %>

<h2>Members</h2>
<% @microcosm.microcosm_members.each do |member| %>
  <%= link_to member.user.display_name, user_path(member.user) %>
<% end %>
